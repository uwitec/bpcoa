{
	"f_where":"A.ID=B.F_MAIL_ID and F_USER_ID=|userid| and B.F_TAG_ID = (select id from t_mk_app_mail_tag where f_creator_id = |userid| and f_name = '收件箱')",
	"f_from":"T_MK_APP_MAIL A, T_MK_APP_MAIL_MAPPING B",
	"f_views":
	{
		"classpath":"view",
		"data":
		[
			{
				"f_icon":"icon-app-mkoa-mail",
				"f_buttons":
				{
					"classpath":"action",
					"data":
					[
						{
							"f_handler":"function(){\n\tvar records = grid.getSelectedRecords();\n\tvar ids = '';\n\tif(records.length > 0){\n\t\tfor (var i = 0; i < records.length; i++) {\n\t\t\tvar id = records[i].get('ID');\n\t\t\tids = ids + id;\n\t\t\tif (i < records.length - 1) {\n\t\t\t\tids = ids + ',';\n\t\t\t}\n\t\t}\t\n\t\tAppMailDirect.deleteMails(ids, false, function(result, event) {\n \t\t\tif (result.success) {\n     \t\t\tMixkyApp.showInfoMessage('已经成功删除选中邮件' , '信息提示');\n     \t\t\tpanel.refresh();\n \t\t\t} else {\n \t\t\t\tMixkyApp.showInfoMessage('操作失败', '信息提示');\n \t\t\t}\n \t\t});\n\t} else {\n\t\tMixkyApp.showInfoMessage('请选择要删除的邮件！' , '信息提示');\n\t}\n}",
							"f_default":false,
							"f_order":1,
							"f_name":"btnDelete",
							"f_caption":"删除",
							"f_key":"btnDelete",
							"f_class":"action",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkMail.qSysInboxMail.vInbox"
							}
						}
					]
				},
				"f_columns":
				{
					"classpath":"column",
					"data":
					[
						{
							"f_type":0,
							"f_order":1,
							"f_asname":"ID",
							"f_query_type":0,
							"f_orderable":false,
							"f_name":"A.ID",
							"f_caption":"ID",
							"f_key":"ID",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkMail.qSysInboxMail.vInbox"
							}
						},
						{
							"f_type":1,
							"f_order":3,
							"f_asname":"F_SUBJECT",
							"f_query_type":1,
							"f_orderable":true,
							"f_name":"A.F_SUBJECT",
							"f_caption":"标题",
							"f_key":"F_SUBJECT",
							"f_config":
							{
								"renderer":"function(v,d,r){\nif(r.get('F_READ_FLAG') == 0){\n\nreturn \"<span style='color:red;'>\"+v+\"</span>\";\n}else{\nreturn v;\n}\n}"
							},
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkMail.qSysInboxMail.vInbox"
							}
						},
						{
							"f_type":1,
							"f_order":2,
							"f_width":"240",
							"f_asname":"F_FROM",
							"f_query_type":1,
							"f_orderable":true,
							"f_name":"A.F_FROM",
							"f_caption":"发件人",
							"f_key":"F_FROM",
							"f_config":
							{
								"renderer":"function(v,d,r){\nif(r.get('F_READ_FLAG') == 0){\n\nreturn \"<span style='color:red;'>\"+v+\"</span>\";\n}else{\nreturn v;\n}\n}"
							},
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkMail.qSysInboxMail.vInbox"
							}
						},
						{
							"f_type":0,
							"f_order":4,
							"f_width":"30",
							"f_asname":"F_READ_FLAG",
							"f_query_type":0,
							"f_orderable":false,
							"f_name":"B.F_READ_FLAG",
							"f_caption":" ",
							"f_key":"F_READ_FLAG",
							"f_config":
							{
								"renderer":"function(v, d, r) {\n\tif (v == 0) {\n\t\treturn String.format('<img src=\"{0}\"/>', 'resources/images/icon/sys/bind.gif');\n\t} else {\n\t\treturn String.format('');\n\t}\n}"
							},
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkMail.qSysInboxMail.vInbox"
							}
						},
						{
							"f_type":6,
							"f_order":6,
							"f_width":"120",
							"f_asname":"F_DATE_RECEIVED",
							"f_query_type":3,
							"f_orderable":true,
							"f_name":"A.F_DATE_RECEIVED",
							"f_caption":"日期",
							"f_key":"F_DATE_RECEIVED",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkMail.qSysInboxMail.vInbox"
							}
						},
						{
							"f_type":1,
							"f_order":5,
							"f_width":"30",
							"f_asname":"F_ATTACHMENT_FLAG",
							"f_query_type":0,
							"f_orderable":true,
							"f_name":"A.F_ATTACHMENT_FLAG",
							"f_caption":" ",
							"f_key":"F_ATTACHMENT_FLAG",
							"f_config":
							{
								"renderer":"function(v, d, r) {\n\tif (v == 1) {\n\t\treturn String.format('<img src=\"{0}\"/>', 'resources/images/app/forum/attach.png');\n\t} else {\n\t\treturn String.format('');\n\t}\n}"
							},
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkMail.qSysInboxMail.vInbox"
							}
						}
					]
				},
				"f_keycolumn":"ID",
				"f_single_select":false,
				"f_page_size":30,
				"f_isquery":true,
				"f_issummary":false,
				"f_autoexpandcolumn":"F_SUBJECT",
				"f_enable_favorite":true,
				"f_i_documenttype":
				{
					"classpath":"documenttype",
					"data":"mkMail.dtTabMail"
				},
				"f_title_field":"F_SUBJECT",
				"f_parameters":
				{
					"classpath":"viewparameter",
					"data":
					[
						{
							"f_sql":"B.F_TAG_ID = (select id from t_mk_app_mail_tag where f_creator_id = |userid| and f_name = '收件箱')",
							"f_nullsql":"B.F_TAG_ID = (select id from t_mk_app_mail_tag where f_creator_id = |userid| and f_name = '收件箱')",
							"f_name":"vpBoxType",
							"f_caption":"vpBoxType",
							"f_key":"vpBoxType",
							"f_class":"viewparameter",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkMail.qSysInboxMail.vInbox"
							}
						},
						{
							"f_sql":"F_ACCOUNT = '|value|'",
							"f_nullsql":"F_ACCOUNT is null",
							"f_name":"F_ACCOUNT",
							"f_caption":"vpAccount",
							"f_key":"vpAccount",
							"f_class":"viewparameter",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkMail.qSysInboxMail.vInbox"
							}
						}
					]
				},
				"f_name":"vInbox",
				"f_caption":"收件箱",
				"f_key":"vInbox",
				"f_config":
				{
					"customscript":"panel.openMail = function(id, readflag) {\n\tif (readflag == 0) {\n\t\tAppMailDirect.readMail(id);\n\t}\n\tMixky.app.common.openFavorite('mkMail.dtTabMail', id);\n}\n\ngrid.on('rowdblclick', function(grid, index, e){\n\tvar r = grid.getStore().getAt(index);\n\tvar id = r.get('ID');\n\tvar readflag = r.get('F_READ_FLAG');\n\n\tif (readflag == 0) {\n\t\tAppMailDirect.readMail(parseInt(id)); \n\t\tMixky.app.common.openFavorite('mkMail.dtTabMail', id);\n\t\tr.set('F_READ_FLAG', 1);\n\t} else {\n\t\tMixky.app.common.openFavorite('mkMail.dtTabMail', id);\n\t}\n});\n\ngrid.getView().getRowClass = function(record, rowIndex, rp, ds){\n\tif(record.get('F_READ_FLAG') == 0){\n\t\treturn 'mixky-mail-readed';\n\t}\n}\n\npanel.fretchmail = function(){\n AppMailDirect.fetMail(function(result, a){\n\t\t\tif(result){\n\t\t\t\tif(result.success){\n\t\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t});\n}\n",
					"stripeRows":false,
					"params":
					{
						"vpBoxType":""
					},
					"refreshscript":"panel.fretchmail();"
				},
				"f_class":"view",
				"f_i_parent":
				{
					"classpath":"query",
					"data":"mkMail.qSysInboxMail"
				}
			},
			{
				"f_icon":"icon-app-mkoa-mail",
				"f_buttons":
				{
					"classpath":"action",
					"data":
					[
						{
							"f_handler":"function(){\n\tvar records = grid.getSelectedRecords();\n\tvar ids = '';\n\tif(records.length > 0){\n\t\tfor (var i = 0; i < records.length; i++) {\n\t\t\tvar id = records[i].get('ID');\n\t\t\tids = ids + id;\n\t\t\tif (i < records.length - 1) {\n\t\t\t\tids = ids + ',';\n\t\t\t}\n\t\t}\t\n\t\tAppMailDirect.deleteMails(ids, false, function(result, event) {\n \t\t\tif (result.success) {\n     \t\t\tMixkyApp.showInfoMessage('已经成功删除选中邮件' , '信息提示');\n     \t\t\tpanel.refresh();\n \t\t\t} else {\n \t\t\t\tMixkyApp.showInfoMessage('操作失败', '信息提示');\n \t\t\t}\n \t\t});\n\t} else {\n\t\tMixkyApp.showInfoMessage('请选择要删除的邮件！' , '信息提示');\n\t}\n}",
							"f_default":false,
							"f_order":1,
							"f_name":"btnDelete",
							"f_caption":"删除",
							"f_key":"btnDelete",
							"f_class":"action",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkMail.qSysInboxMail.vdpInbox"
							}
						},
						{
							"f_handler":"function(){\nAppMailDirect.fetMail(function(result, a){\n\t\t\tif(result){\n\t\t\t\tif(result.success){\n\t\t\t\t\tpanel.refresh();\n\t\t\t\t}else{\n\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t});\n}",
							"f_default":false,
							"f_order":2,
							"f_name":"btnFetch",
							"f_caption":"收件",
							"f_key":"btnFetch",
							"f_class":"action",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkMail.qSysInboxMail.vdpInbox"
							}
						}
					]
				},
				"f_columns":
				{
					"classpath":"column",
					"data":
					[
						{
							"f_type":0,
							"f_order":1,
							"f_asname":"ID",
							"f_query_type":0,
							"f_orderable":false,
							"f_name":"A.ID",
							"f_caption":"ID",
							"f_key":"ID",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkMail.qSysInboxMail.vdpInbox"
							}
						},
						{
							"f_type":1,
							"f_order":3,
							"f_asname":"F_SUBJECT",
							"f_query_type":0,
							"f_orderable":false,
							"f_name":"A.F_SUBJECT",
							"f_caption":"标题",
							"f_key":"F_SUBJECT",
							"f_config":
							{
								"renderer":"function(v,d,r){\nif(r.get('F_READ_FLAG') == 0){\n\nreturn \"<span style='color:red;'>\"+v+\"</span>\";\n}else{\nreturn v;\n}\n}"
							},
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkMail.qSysInboxMail.vdpInbox"
							}
						},
						{
							"f_type":1,
							"f_order":2,
							"f_width":"",
							"f_asname":"F_FROM",
							"f_query_type":0,
							"f_orderable":false,
							"f_name":"A.F_FROM",
							"f_caption":"发件人",
							"f_key":"F_FROM",
							"f_config":
							{
								"renderer":"function(v,d,r){\nif(r.get('F_READ_FLAG') == 0){\n\nreturn \"<span style='color:red;'>\"+v+\"</span>\";\n}else{\nreturn v;\n}\n}"
							},
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkMail.qSysInboxMail.vdpInbox"
							}
						},
						{
							"f_type":6,
							"f_order":6,
							"f_width":"120",
							"f_asname":"F_DATE_RECEIVED",
							"f_query_type":0,
							"f_orderable":false,
							"f_name":"A.F_DATE_RECEIVED",
							"f_caption":"日期",
							"f_key":"F_DATE_RECEIVED",
							"f_config":
							{
								"renderer":"function(v,d,r){\nif(r.get('F_READ_FLAG') == 0){\n\nreturn \"<span style='color:red;'>\"+v+\"</span>\";\n}else{\nreturn v;\n}\n}"
							},
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkMail.qSysInboxMail.vdpInbox"
							}
						},
						{
							"f_type":0,
							"f_order":4,
							"f_width":"30",
							"f_asname":"F_READ_FLAG",
							"f_query_type":0,
							"f_orderable":false,
							"f_name":"B.F_READ_FLAG",
							"f_caption":" ",
							"f_key":"F_READ_FLAG",
							"f_config":
							{
								"renderer":"function(v, d, r) {\n\tif (v == 0) {\n\t\treturn String.format('<img src=\"{0}\"/>', 'resources/images/icon/sys/bind.gif');\n\t} else {\n\t\treturn String.format('');\n\t}\n}"
							},
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkMail.qSysInboxMail.vdpInbox"
							}
						},
						{
							"f_type":1,
							"f_order":5,
							"f_width":"30",
							"f_asname":"F_ATTACHMENT_FLAG",
							"f_query_type":0,
							"f_orderable":true,
							"f_name":"A.F_ATTACHMENT_FLAG",
							"f_caption":" ",
							"f_key":"F_ATTACHMENT_FLAG",
							"f_config":
							{
								"renderer":"function(v, d, r) {\n\tif (v == 1) {\n\t\treturn String.format('<img src=\"{0}\"/>', 'resources/images/app/forum/attach.png');\n\t} else {\n\t\treturn String.format('');\n\t}\n}"
							},
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkMail.qSysInboxMail.vdpInbox"
							}
						}
					]
				},
				"f_keycolumn":"ID",
				"f_single_select":true,
				"f_page_size":15,
				"f_isquery":false,
				"f_issummary":false,
				"f_autoexpandcolumn":"F_SUBJECT",
				"f_enable_favorite":false,
				"f_title_field":"F_SUBJECT",
				"f_parameters":
				{
					"classpath":"viewparameter",
					"data":
					[
						{
							"f_sql":"B.F_TAG_ID = (select id from t_mk_app_mail_tag where f_creator_id = |userid| and f_name = '收件箱')",
							"f_nullsql":"B.F_TAG_ID = (select id from t_mk_app_mail_tag where f_creator_id = |userid| and f_name = '收件箱')",
							"f_name":"vpBoxType",
							"f_caption":"vpBoxType",
							"f_key":"vpBoxType",
							"f_class":"viewparameter",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkMail.qSysInboxMail.vdpInbox"
							}
						},
						{
							"f_sql":"F_ACCOUNT = '|value|'",
							"f_nullsql":"F_ACCOUNT is null",
							"f_name":"F_ACCOUNT",
							"f_caption":"vpAccount",
							"f_key":"vpAccount",
							"f_class":"viewparameter",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkMail.qSysInboxMail.vdpInbox"
							}
						}
					]
				},
				"f_name":"vdpInbox",
				"f_caption":"桌面收件箱",
				"f_key":"vdpInbox",
				"f_config":
				{
					"customscript":"panel.openMail = function(id, readflag) {\n\tif (readflag == 0) {\n\t\tAppMailDirect.readMail(id);\n\t}\n\tMixky.app.common.openFavorite('mkMail.dtTabMail', id);\n}\n\ngrid.on('rowdblclick', function(grid, index, e){\n\tvar r = grid.getStore().getAt(index);\n\tvar id = r.get('ID');\n\tvar readflag = r.get('F_READ_FLAG');\n\n\tif (readflag == 0) {\n\t\tAppMailDirect.readMail(parseInt(id)); \n\t\tMixky.app.common.openFavorite('mkMail.dtTabMail', id);\n\t\tr.set('F_READ_FLAG', 1);\n\t} else {\n\t\tMixky.app.common.openFavorite('mkMail.dtTabMail', id);\n\t}\n});\n\n\n",
					"stripeRows":true,
					"params":
					{
						"vpBoxType":""
					}
				},
				"f_class":"view",
				"f_i_parent":
				{
					"classpath":"query",
					"data":"mkMail.qSysInboxMail"
				}
			},
			{
				"f_icon":"icon-app-mkoa-mail",
				"f_columns":
				{
					"classpath":"column",
					"data":
					[
						{
							"f_type":0,
							"f_order":1,
							"f_asname":"ID",
							"f_query_type":0,
							"f_orderable":false,
							"f_name":"A.ID",
							"f_caption":"ID",
							"f_key":"ID",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkMail.qSysInboxMail.vpInbox"
							}
						},
						{
							"f_type":1,
							"f_order":3,
							"f_width":"120",
							"f_asname":"F_FROM",
							"f_query_type":0,
							"f_orderable":false,
							"f_name":"A.F_FROM",
							"f_caption":"发件人",
							"f_key":"F_FROM",
							"f_config":
							{
								"renderer":"function(v,d,r){\nif(r.get('F_READ_FLAG') == 0){\n\nreturn \"<span style='color:red;'>\"+v+\"</span>\";\n}else{\nreturn v;\n}\n}"
							},
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkMail.qSysInboxMail.vpInbox"
							}
						},
						{
							"f_type":1,
							"f_order":2,
							"f_asname":"F_SUBJECT",
							"f_query_type":0,
							"f_orderable":false,
							"f_name":"A.F_SUBJECT",
							"f_caption":"标题",
							"f_key":"F_SUBJECT",
							"f_config":
							{
								"renderer":"function(v,d,r){\nif(r.get('F_READ_FLAG') == 0){\n\nreturn \"<span style='color:red;'>\"+v+\"</span>\";\n}else{\nreturn v;\n}\n}"
							},
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkMail.qSysInboxMail.vpInbox"
							}
						}
					]
				},
				"f_keycolumn":"ID",
				"f_single_select":true,
				"f_page_size":5,
				"f_isquery":false,
				"f_issummary":false,
				"f_autoexpandcolumn":"F_SUBJECT",
				"f_enable_favorite":false,
				"f_title_field":"",
				"f_parameters":
				{
					"classpath":"viewparameter",
					"data":
					[
						{
							"f_sql":"F_ACCOUNT = '|value|'",
							"f_nullsql":"F_ACCOUNT is null",
							"f_name":"F_ACCOUNT",
							"f_caption":"vpAccount",
							"f_key":"vpAccount",
							"f_class":"viewparameter",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkMail.qSysInboxMail.vpInbox"
							}
						},
						{
							"f_sql":"B.F_TAG_ID = (select id from t_mk_app_mail_tag where f_creator_id = |userid| and f_name = '收件箱')",
							"f_nullsql":"B.F_TAG_ID = (select id from t_mk_app_mail_tag where f_creator_id = |userid| and f_name = '收件箱')",
							"f_name":"vpBoxType",
							"f_caption":"vpBoxType",
							"f_key":"vpBoxType",
							"f_class":"viewparameter",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkMail.qSysInboxMail.vpInbox"
							}
						}
					]
				},
				"f_name":"vpInbox",
				"f_caption":"桌面邮件收件箱",
				"f_key":"vpInbox",
				"f_class":"view",
				"f_i_parent":
				{
					"classpath":"query",
					"data":"mkMail.qSysInboxMail"
				}
			}
		]
	},
	"f_orderby":"A.ID DESC",
	"f_groups":
	{
		"classpath":"group",
		"data":
		[
			{
				"f_type":2,
				"f_field":"F_ACCOUNT",
				"f_name":"F_ACCOUNT",
				"f_caption":"gByAccount",
				"f_key":"gByAccount",
				"f_class":"group",
				"f_i_parent":
				{
					"classpath":"query",
					"data":"mkMail.qSysInboxMail"
				}
			}
		]
	},
	"f_name":"qSysInboxMail",
	"f_caption":"qSysInboxMail",
	"f_key":"qSysInboxMail",
	"f_class":"query",
	"f_i_parent":
	{
		"classpath":"module",
		"data":"mkMail"
	}
}