{
	"f_where":"f_user_id=|userid| and f_state=0",
	"f_from":"T_MK_SYS_MESSAGES",
	"f_orderby":"f_created desc",
	"f_views":
	{
		"classpath":"view",
		"data":
		[
			{
				"f_icon":"icon-app-mkoa-todo",
				"f_buttons":
				{
					"classpath":"action",
					"data":
					[
						{
							"f_order":1,
							"f_handler":"function(){\n\tvar records = grid.getSelectedRecords();\n\tif(records.length > 0){\n\t\tvar key = records[0].get('f_source_dockey');\n\t\tvar dataid = records[0].get('f_source_dataid');\n\t\tvar id = records[0].get('id');\n\t\tvar type = records[0].get('f_type');\n\t\tif (type == 1) {\n\t\t\tViewAppDirect.updateTodoMessageState(parseInt(id));\n\t\t}\n\t\tMixkyApp.desktop.openDocument(key, dataid);\n\t}\n}",
							"f_default":true,
							"f_name":"btnOpen",
							"f_caption":"打开",
							"f_key":"btnOpen",
							"f_class":"action",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkTodo.qTodo.vTodo"
							}
						}
					]
				},
				"f_columns":
				{
					"classpath":"column",
					"data":
					[
						{
							"f_type":1,
							"f_order":5,
							"f_query_type":1,
							"f_orderable":false,
							"f_name":"f_title",
							"f_caption":"标题",
							"f_key":"f_title",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkTodo.qTodo.vTodo"
							}
						},
						{
							"f_type":1,
							"f_order":6,
							"f_query_type":0,
							"f_orderable":false,
							"f_name":"f_sender_name",
							"f_caption":"发送人",
							"f_key":"f_sender_name",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkTodo.qTodo.vTodo"
							}
						},
						{
							"f_type":6,
							"f_order":7,
							"f_query_type":0,
							"f_orderable":false,
							"f_name":"f_created",
							"f_caption":"发送时间",
							"f_key":"f_created",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkTodo.qTodo.vTodo"
							}
						},
						{
							"f_type":0,
							"f_order":1,
							"f_query_type":0,
							"f_orderable":false,
							"f_name":"id",
							"f_caption":"ID",
							"f_key":"id",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkTodo.qTodo.vTodo"
							}
						},
						{
							"f_type":0,
							"f_order":2,
							"f_query_type":0,
							"f_orderable":false,
							"f_name":"f_source_dockey",
							"f_caption":"DocumentKey",
							"f_key":"f_source_dockey",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkTodo.qTodo.vTodo"
							}
						},
						{
							"f_type":1,
							"f_order":4,
							"f_query_type":0,
							"f_orderable":false,
							"f_name":"f_source",
							"f_caption":"模块",
							"f_key":"f_source",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkTodo.qTodo.vTodo"
							}
						},
						{
							"f_type":0,
							"f_order":3,
							"f_query_type":0,
							"f_orderable":false,
							"f_name":"f_source_dataid",
							"f_caption":"DataId",
							"f_key":"f_source_dataid",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkTodo.qTodo.vTodo"
							}
						},
						{
							"f_type":0,
							"f_order":8,
							"f_query_type":0,
							"f_orderable":false,
							"f_name":"f_type",
							"f_caption":"f_type",
							"f_key":"f_type",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkTodo.qTodo.vTodo"
							}
						}
					]
				},
				"f_keycolumn":"id",
				"f_single_select":false,
				"f_page_size":30,
				"f_isquery":true,
				"f_issummary":false,
				"f_autoexpandcolumn":"f_title",
				"f_enable_favorite":false,
				"f_parameters":
				{
					"classpath":"viewparameter",
					"data":
					[
						{
							"f_sql":"F_SOURCE='|value|'",
							"f_nullsql":"F_SOURCE IS NULL",
							"f_name":"vpBySource",
							"f_caption":"按来源查询",
							"f_key":"ParambySource",
							"f_class":"viewparameter",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkTodo.qTodo.vTodo"
							}
						}
					]
				},
				"f_name":"vTodo",
				"f_caption":"待办事宜",
				"f_key":"vTodo",
				"f_class":"view",
				"f_i_parent":
				{
					"classpath":"query",
					"data":"mkTodo.qTodo"
				}
			},
			{
				"f_icon":"icon-app-mkoa-todo",
				"f_buttons":
				{
					"classpath":"action",
					"data":
					[
						{
							"f_order":1,
							"f_handler":"function(){\n\tvar records = grid.getSelectedRecords();\n\tif(records.length > 0){\n\t\tvar key = records[0].get('F_SOURCE_DOCKEY');\n\t\tvar dataid = records[0].get('F_SOURCE_DATAID');\n\t\tvar id = records[0].get('ID');\n\t\tvar type = records[0].get('F_TYPE');\n\t\tif (type == 1) {\n\t\t\tViewAppDirect.updateTodoMessageState(parseInt(id));\n\t\t}\n\t\tMixky.app.common.openFavorite(key, dataid);\n\t}\n}",
							"f_default":true,
							"f_name":"btnOpen",
							"f_caption":"打开待办",
							"f_key":"btnOpen",
							"f_class":"action",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkTodo.qTodo.vTodoPortlet"
							}
						}
					]
				},
				"f_columns":
				{
					"classpath":"column",
					"data":
					[
						{
							"f_type":0,
							"f_order":1,
							"f_query_type":0,
							"f_orderable":false,
							"f_name":"ID",
							"f_caption":"ID",
							"f_key":"ID",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkTodo.qTodo.vTodoPortlet"
							}
						},
						{
							"f_type":0,
							"f_order":2,
							"f_query_type":0,
							"f_orderable":false,
							"f_name":"F_SOURCE_DOCKEY",
							"f_caption":"F_SOURCE_DOCKEY",
							"f_key":"F_SOURCE_DOCKEY",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkTodo.qTodo.vTodoPortlet"
							}
						},
						{
							"f_type":1,
							"f_order":6,
							"f_width":"70",
							"f_query_type":0,
							"f_orderable":false,
							"f_name":"F_SOURCE",
							"f_caption":"模块",
							"f_key":"F_SOURCE",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkTodo.qTodo.vTodoPortlet"
							}
						},
						{
							"f_type":0,
							"f_order":3,
							"f_query_type":0,
							"f_orderable":false,
							"f_name":"F_SOURCE_DATAID",
							"f_caption":"F_SOURCE_DATAID",
							"f_key":"F_SOURCE_DATAID",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkTodo.qTodo.vTodoPortlet"
							}
						},
						{
							"f_type":0,
							"f_order":4,
							"f_query_type":0,
							"f_orderable":false,
							"f_name":"F_CREATED",
							"f_caption":"发送时间",
							"f_key":"F_CREATED",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkTodo.qTodo.vTodoPortlet"
							}
						},
						{
							"f_type":0,
							"f_order":5,
							"f_query_type":0,
							"f_orderable":false,
							"f_name":"F_SENDER_NAME",
							"f_caption":"发送人",
							"f_key":"F_SENDER_NAME",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkTodo.qTodo.vTodoPortlet"
							}
						},
						{
							"f_type":1,
							"f_order":7,
							"f_query_type":0,
							"f_orderable":false,
							"f_name":"F_TITLE",
							"f_caption":"标题",
							"f_key":"F_TITLE",
							"f_config":
							{
								"renderer":"function renderLast(value, p, r){\n\treturn String.format('<b>{0}</b> <br/> <I>{1}</I> {2}', value, r.get('F_SENDER_NAME'), r.get('F_CREATED'));\n}"
							},
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkTodo.qTodo.vTodoPortlet"
							}
						},
						{
							"f_type":0,
							"f_order":8,
							"f_query_type":0,
							"f_orderable":false,
							"f_name":"F_TYPE",
							"f_caption":"F_TYPE",
							"f_key":"F_TYPE",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkTodo.qTodo.vTodoPortlet"
							}
						}
					]
				},
				"f_keycolumn":"ID",
				"f_single_select":true,
				"f_page_size":0,
				"f_isquery":false,
				"f_issummary":false,
				"f_autoexpandcolumn":"F_TITLE",
				"f_enable_favorite":false,
				"f_name":"vTodoPortlet",
				"f_caption":"我的待办事宜",
				"f_key":"vTodoPortlet",
				"f_class":"view",
				"f_i_parent":
				{
					"classpath":"query",
					"data":"mkTodo.qTodo"
				}
			}
		]
	},
	"f_groups":
	{
		"classpath":"group",
		"data":
		[
			{
				"f_type":2,
				"f_field":"f_source",
				"f_valuefield":"",
				"f_name":"vpBySource",
				"f_caption":"按来源分组",
				"f_key":"gTodoBySource",
				"f_class":"group",
				"f_i_parent":
				{
					"classpath":"query",
					"data":"mkTodo.qTodo"
				}
			}
		]
	},
	"f_name":"qTodo",
	"f_caption":"待办理事宜",
	"f_key":"qTodo",
	"f_class":"query",
	"f_i_parent":
	{
		"classpath":"module",
		"data":"mkTodo"
	}
}