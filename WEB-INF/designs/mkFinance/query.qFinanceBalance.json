{
	"f_from":"T_MK_APP_FINANCE_ACCOUNT_B A JOIN T_MK_APP_FINANCE_ACCOUNT B ON A.F_ACCOUNT_ID = B.ID",
	"f_views":
	{
		"classpath":"view",
		"data":
		[
			{
				"f_icon":"icon-app-mkoa-financebalance",
				"f_buttons":
				{
					"classpath":"action",
					"data":
					[
						{
							"f_icon":"icon-sys-list",
							"f_order":2,
							"f_default":true,
							"f_handler":"function(){\n\tvar records = grid.getSelectedRecords();\n\tif(records.length > 0){\n\t\tvar no = records[0].get('F_NO');\n\t\tvar module = MixkyApp.desktop.openModule('mkFinance');\n\t\tvar view = module.openView('mkFinance.qFinanceBalanceDetail.vFinanceBalanceDetail');\n\t\tif(Ext.isDefined(view.refresh)){\n\t\t\tview.refresh({'F_BALANCE_NO':no});\n\t\t}else{\n\t\t\tview.initParams = {'F_BALANCE_NO':no};\n\t\t}\n\t}\n}",
							"f_name":"btnViewDetail",
							"f_caption":"查看明细",
							"f_key":"btnViewDetail",
							"f_class":"action",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkFinance.qFinanceBalance.vFinanceBalance"
							}
						},
						{
							"f_icon":"icon-sys-explorer",
							"f_order":1,
							"f_default":false,
							"f_handler":"function(){\n\tvar beginDate = new Ext.form.DateField({\n\t\teditable : false,\n\t\tanchor : '100%',\n\t\tlabelWidth : 75,\n\t\tfieldLabel : '帐期开始',\n\t\treadOnly : true,\n\t\tformat : 'Y-m-d'\n\t});\n\tvar endDate = new Ext.form.DateField({\n\t\teditable : false,\n\t\tanchor : '100%',\n\t\tlabelWidth : 75,\n\t\tfieldLabel : '帐期截止',\n\t\tformat : 'Y-m-d'\n\t});\n\tvar form = new Ext.form.FormPanel({\n\t\tpadding : 15,\n\t\titems : [beginDate ,endDate]\n\t});\n\tvar win = new Ext.Window({\n\t\tmanager : MixkyApp.desktop.getManager(),\n\t\tmodal : true,\n\t\tresizable : false,\n\t\twidth : 250,\n\t\theight : 180,\n\t\ttitle : \"执行账户结算\",\n\t\tlayout : 'fit',\n\t\titems : form,\n\t\tbuttons : [{\n\t\t\ttext : '执行结算',\n\t\t\ticonCls : 'icon-sys-apply',\n\t\t\thandler : function(){\n\t\t\t\tFinanceAppDirect.doBalance(beginDate.getRawValue(), endDate.getRawValue(), function(result, a){\n\t\t\t\t\tif(result && result.success){\n\t\t\t\t\t\tMixkyApp.showInfoMessage('执行账户结算完毕！');\n\t\t\t\t\t\tpanel.refresh();\n\t\t\t\t\t\twin.close();\n\t\t\t\t\t}else{\n\t\t\t\t\t\tMixkyApp.showErrorMessage(\"执行结算失败，请重试\");\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}, {\n\t\t\ttext : '取消',\n\t\t\ticonCls : 'icon-sys-cancel',\n\t\t\thandler : function(){\n\t\t\t\twin.close();\n\t\t\t}\n\t\t}]\n\t\t\n\t});\n\twin.show();\n\tFinanceAppDirect.getDefaultBalanceDate(function(result, a){\n\t\tif(result && result.success){\n\t\t\tbeginDate.setValue(result.beginDate);\n\t\t\tendDate.setValue(result.endDate);\n\t\t}else{\n\t\t\tMixkyApp.showErrorMessage(\"初始化错误，请重试\");\n\t\t\twin.close();\n\t\t}\n\t});\n}",
							"f_name":"btnExecute",
							"f_caption":"执行结算",
							"f_key":"btnExecute",
							"f_class":"action",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkFinance.qFinanceBalance.vFinanceBalance"
							}
						}
					]
				},
				"f_columns":
				{
					"classpath":"column",
					"data":
					[
						{
							"f_type":0,
							"f_order":1,
							"f_asname":"ID",
							"f_query_type":0,
							"f_orderable":false,
							"f_name":"A.ID",
							"f_caption":"ID",
							"f_key":"ID",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkFinance.qFinanceBalance.vFinanceBalance"
							}
						},
						{
							"f_type":1,
							"f_order":5,
							"f_asname":"F_ACCOUNT_NAME",
							"f_query_type":0,
							"f_orderable":true,
							"f_name":"B.F_CAPTION",
							"f_caption":"账户名",
							"f_key":"F_ACCOUNT_NAME",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkFinance.qFinanceBalance.vFinanceBalance"
							}
						},
						{
							"f_type":5,
							"f_order":3,
							"f_width":"80",
							"f_asname":"",
							"f_query_type":0,
							"f_orderable":true,
							"f_name":"F_START_DATE",
							"f_caption":"开始日期",
							"f_key":"F_START_DATE",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkFinance.qFinanceBalance.vFinanceBalance"
							}
						},
						{
							"f_type":5,
							"f_order":4,
							"f_width":"80",
							"f_asname":"",
							"f_query_type":0,
							"f_orderable":false,
							"f_name":"F_END_DATE",
							"f_caption":"截止日期",
							"f_key":"F_END_DATE",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkFinance.qFinanceBalance.vFinanceBalance"
							}
						},
						{
							"f_type":1,
							"f_order":2,
							"f_width":"60",
							"f_asname":"F_NO",
							"f_query_type":0,
							"f_orderable":true,
							"f_name":"A.F_NO",
							"f_caption":"结算编号",
							"f_key":"F_NO",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkFinance.qFinanceBalance.vFinanceBalance"
							}
						},
						{
							"f_type":4,
							"f_order":6,
							"f_width":"70",
							"f_asname":"F_BEGIN_VALUE",
							"f_query_type":0,
							"f_orderable":true,
							"f_summary_type":"sum",
							"f_name":"A.F_BEGIN_VALUE",
							"f_caption":"期初金额",
							"f_key":"F_BEGIN_VALUE",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkFinance.qFinanceBalance.vFinanceBalance"
							}
						},
						{
							"f_type":4,
							"f_order":9,
							"f_width":"70",
							"f_asname":"F_OCCUR_VALUE",
							"f_query_type":0,
							"f_orderable":true,
							"f_summary_type":"sum",
							"f_name":"A.F_OCCUR_VALUE",
							"f_caption":"流水",
							"f_key":"F_OCCUR_VALUE",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkFinance.qFinanceBalance.vFinanceBalance"
							}
						},
						{
							"f_type":4,
							"f_order":10,
							"f_width":"70",
							"f_asname":"F_END_VALUE",
							"f_query_type":0,
							"f_orderable":true,
							"f_summary_type":"sum",
							"f_name":"A.F_END_VALUE",
							"f_caption":"期末余额",
							"f_key":"F_END_VALUE",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkFinance.qFinanceBalance.vFinanceBalance"
							}
						},
						{
							"f_type":3,
							"f_order":11,
							"f_width":"50",
							"f_asname":"F_BELEG_COUNT",
							"f_query_type":0,
							"f_orderable":true,
							"f_summary_type":"sum",
							"f_name":"A.F_BELEG_COUNT",
							"f_caption":"凭据数",
							"f_key":"F_BELEG_COUNT",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkFinance.qFinanceBalance.vFinanceBalance"
							}
						},
						{
							"f_type":6,
							"f_order":12,
							"f_width":"100",
							"f_asname":"",
							"f_query_type":0,
							"f_orderable":false,
							"f_name":"F_ACCOUNT_TIME",
							"f_caption":"结算时间",
							"f_key":"F_ACCOUNT_TIME",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkFinance.qFinanceBalance.vFinanceBalance"
							}
						},
						{
							"f_type":4,
							"f_order":7,
							"f_width":"70",
							"f_asname":"F_IN_VALUE",
							"f_query_type":0,
							"f_orderable":true,
							"f_summary_type":"sum",
							"f_name":"A.F_IN_VALUE",
							"f_caption":"收入",
							"f_key":"F_IN_VALUE",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkFinance.qFinanceBalance.vFinanceBalance"
							}
						},
						{
							"f_type":4,
							"f_order":8,
							"f_width":"70",
							"f_asname":"F_OUT_VALUE",
							"f_query_type":0,
							"f_orderable":true,
							"f_summary_type":"sum",
							"f_name":"A.F_OUT_VALUE",
							"f_caption":"支出",
							"f_key":"F_OUT_VALUE",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkFinance.qFinanceBalance.vFinanceBalance"
							}
						}
					]
				},
				"f_keycolumn":"ID",
				"f_single_select":true,
				"f_page_size":30,
				"f_isquery":false,
				"f_issummary":true,
				"f_autoexpandcolumn":"F_ACCOUNT_NAME",
				"f_enable_favorite":false,
				"f_parameters":
				{
					"classpath":"viewparameter",
					"data":
					[
						{
							"f_sql":"F_NO LIKE '|value|%'",
							"f_nullsql":"F_NO IS NULL",
							"f_name":"F_YEAR",
							"f_caption":"vpYear",
							"f_key":"vpYear",
							"f_class":"viewparameter",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkFinance.qFinanceBalance.vFinanceBalance"
							}
						}
					]
				},
				"f_name":"vFinanceBalance",
				"f_caption":"账户结算记录",
				"f_key":"vFinanceBalance",
				"f_class":"view",
				"f_i_parent":
				{
					"classpath":"query",
					"data":"mkFinance.qFinanceBalance"
				}
			}
		]
	},
	"f_orderby":"A.F_NO DESC, A.F_ACCOUNT_ID",
	"f_groups":
	{
		"classpath":"group",
		"data":
		[
			{
				"f_type":2,
				"f_field":"MK_GETYEAR(F_START_DATE)",
				"f_name":"F_YEAR",
				"f_caption":"gByYear",
				"f_key":"gByYear",
				"f_class":"group",
				"f_i_parent":
				{
					"classpath":"query",
					"data":"mkFinance.qFinanceBalance"
				}
			}
		]
	},
	"f_name":"qFinanceBalance",
	"f_caption":"qFinanceBalance",
	"f_key":"qFinanceBalance",
	"f_class":"query",
	"f_i_parent":
	{
		"classpath":"module",
		"data":"mkFinance"
	}
}