{
	"f_where":"F_USER_ID=|userid|",
	"f_from":"T_MK_APP_NAMECARD",
	"f_views":
	{
		"classpath":"view",
		"data":
		[
			{
				"f_icon":"icon-app-mkoa-namecard",
				"f_buttons":
				{
					"classpath":"action",
					"data":
					[
						{
							"f_handler":"function(){\n\tvar records = grid.getSelectedRecords();\n\tif(records.length > 0){\n\t\tvar id = records[0].get('ID');\n\t\tMixkyApp.desktop.openDocument('mkAddressBook.docNameCard', id);\n\t}\n}",
							"f_default":true,
							"f_order":1,
							"f_name":"btnOpen",
							"f_caption":"打开",
							"f_key":"btnOpen",
							"f_class":"action",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkAddressBook.qMyNameCard.vMyNamecard"
							}
						},
						{
							"f_handler":"function(){\n\tif (store.baseParams.params['groupkey'] == 'mkAddressBook.qMyNameCard.gRootS.gByUnit.gpByUnit' && store.baseParams.params['gpByUnit']) {\n\t\tMixkyApp.desktop.openDocument('mkAddressBook.docNameCard', 0, {F_UNIT_NAME:store.baseParams.params['gpByUnit']});\n\t} else\n\t\tMixkyApp.desktop.openDocument('mkAddressBook.docNameCard');\n}",
							"f_default":false,
							"f_order":2,
							"f_name":"btnAdd",
							"f_caption":"创建名片",
							"f_key":"btnAdd",
							"f_class":"action",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkAddressBook.qMyNameCard.vMyNamecard"
							}
						},
						{
							"f_handler":"{\n\tfile_types: '*.xls;*.xlsx',\n\tupload_url : 'servlet/app/addressbook.import',\n\tpost_params : {\n\t\ttableName : 't_mk_app_namecard',\n\t\tuserkey: MixkyApp.userConfig.key,\n\t\tcolumNumber: 16\n\t},\n\tlisteners : {\n\t\t'allUploadsComplete' : function(){\n\t\t\tpanel.refresh();\n\t\t}\n\t}\n}",
							"f_default":false,
							"f_order":4,
							"f_name":"btnImport",
							"f_caption":"Excel导入",
							"f_key":"btnImport",
							"f_config":
							{
								"xtype":"mixkyuploadbutton"
							},
							"f_class":"action",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkAddressBook.qMyNameCard.vMyNamecard"
							}
						},
						{
							"f_icon":"icon-sys-download",
							"f_handler":"function() {\n\tlocation.href='resources/excelmodel/contact.xls';\n}",
							"f_default":false,
							"f_order":3,
							"f_name":"btnDownloadModel",
							"f_caption":"下载Excel模板",
							"f_key":"btnDownloadModel",
							"f_class":"action",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkAddressBook.qMyNameCard.vMyNamecard"
							}
						},
						{
							"f_handler":"function() {\n     panel.exportToExcel();\n}",
							"f_default":false,
							"f_order":5,
							"f_name":"btnExport",
							"f_caption":"导出到Excel",
							"f_key":"btnExport",
							"f_class":"action",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkAddressBook.qMyNameCard.vMyNamecard"
							}
						}
					]
				},
				"f_columns":
				{
					"classpath":"column",
					"data":
					[
						{
							"f_type":0,
							"f_order":1,
							"f_asname":"",
							"f_query_type":0,
							"f_orderable":false,
							"f_name":"ID",
							"f_caption":"ID",
							"f_key":"ID",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkAddressBook.qMyNameCard.vMyNamecard"
							}
						},
						{
							"f_type":1,
							"f_order":2,
							"f_width":"60",
							"f_asname":"",
							"f_query_type":1,
							"f_orderable":false,
							"f_name":"F_NAME",
							"f_caption":"姓名",
							"f_key":"F_NAME",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkAddressBook.qMyNameCard.vMyNamecard"
							}
						},
						{
							"f_type":0,
							"f_order":3,
							"f_width":"80",
							"f_asname":"",
							"f_query_type":1,
							"f_orderable":false,
							"f_name":"F_ENAME",
							"f_caption":"英文名",
							"f_key":"F_ENAME",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkAddressBook.qMyNameCard.vMyNamecard"
							}
						},
						{
							"f_type":1,
							"f_order":6,
							"f_width":"120",
							"f_asname":"",
							"f_query_type":1,
							"f_orderable":false,
							"f_name":"F_UNIT_NAME",
							"f_caption":"单位",
							"f_key":"F_UNIT_NAME",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkAddressBook.qMyNameCard.vMyNamecard"
							}
						},
						{
							"f_type":0,
							"f_order":7,
							"f_width":"80",
							"f_asname":"",
							"f_query_type":1,
							"f_orderable":false,
							"f_name":"F_DEPARTMENT",
							"f_caption":"部门",
							"f_key":"F_DEPARTMENT",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkAddressBook.qMyNameCard.vMyNamecard"
							}
						},
						{
							"f_type":0,
							"f_order":8,
							"f_width":"60",
							"f_asname":"",
							"f_query_type":1,
							"f_orderable":false,
							"f_name":"F_DUTY",
							"f_caption":"职位",
							"f_key":"F_DUTY",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkAddressBook.qMyNameCard.vMyNamecard"
							}
						},
						{
							"f_type":1,
							"f_order":9,
							"f_asname":"",
							"f_query_type":1,
							"f_orderable":false,
							"f_name":"F_ADDRESS",
							"f_caption":"地址",
							"f_key":"F_ADDRESS",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkAddressBook.qMyNameCard.vMyNamecard"
							}
						},
						{
							"f_type":1,
							"f_order":10,
							"f_width":"100",
							"f_asname":"",
							"f_query_type":0,
							"f_orderable":false,
							"f_name":"F_CELL_PHONE",
							"f_caption":"手机",
							"f_key":"F_CELL_PHONE",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkAddressBook.qMyNameCard.vMyNamecard"
							}
						},
						{
							"f_type":1,
							"f_order":11,
							"f_width":"100",
							"f_asname":"",
							"f_query_type":0,
							"f_orderable":false,
							"f_name":"F_OFFICE_PHONE",
							"f_caption":"办公电话",
							"f_key":"F_OFFICE_PHONE",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkAddressBook.qMyNameCard.vMyNamecard"
							}
						},
						{
							"f_type":1,
							"f_order":12,
							"f_width":"100",
							"f_asname":"",
							"f_query_type":0,
							"f_orderable":false,
							"f_name":"F_EMAIL",
							"f_caption":"电子邮件",
							"f_key":"F_EMAIL",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkAddressBook.qMyNameCard.vMyNamecard"
							}
						},
						{
							"f_type":0,
							"f_order":4,
							"f_width":"35",
							"f_query_type":1,
							"f_orderable":true,
							"f_name":"F_SEX",
							"f_caption":"性别",
							"f_key":"F_SEX",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkAddressBook.qMyNameCard.vMyNamecard"
							}
						},
						{
							"f_type":0,
							"f_order":5,
							"f_width":"40",
							"f_query_type":1,
							"f_orderable":true,
							"f_name":"F_NATIONALITY",
							"f_caption":"籍贯",
							"f_key":"F_NATIONALITY",
							"f_class":"column",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkAddressBook.qMyNameCard.vMyNamecard"
							}
						}
					]
				},
				"f_keycolumn":"ID",
				"f_single_select":true,
				"f_page_size":30,
				"f_isquery":true,
				"f_issummary":false,
				"f_autoexpandcolumn":"F_ADDRESS",
				"f_enable_favorite":true,
				"f_i_documenttype":
				{
					"classpath":"documenttype",
					"data":"mkAddressBook.dtPersonalNamecard"
				},
				"f_title_field":"F_NAME",
				"f_parameters":
				{
					"classpath":"viewparameter",
					"data":
					[
						{
							"f_sql":"F_TAGS LIKE '%|value|%'",
							"f_nullsql":"F_TAGS IS NULL",
							"f_name":"gpByTagS",
							"f_caption":"vpTagName",
							"f_key":"vpTagName",
							"f_class":"viewparameter",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkAddressBook.qMyNameCard.vMyNamecard"
							}
						},
						{
							"f_sql":"F_UNIT_NAME='|value|'",
							"f_nullsql":"F_UNIT_NAME IS NULL",
							"f_name":"gpByUnit",
							"f_caption":"vpUnit",
							"f_key":"vpUnit",
							"f_class":"viewparameter",
							"f_i_parent":
							{
								"classpath":"view",
								"data":"mkAddressBook.qMyNameCard.vMyNamecard"
							}
						}
					]
				},
				"f_name":"vMyNamecard",
				"f_caption":"我的名片夹",
				"f_key":"vMyNamecard",
				"f_config":
				{
					"enableDragDrop":true,
					"customscript":"Ext.getCmp('m-mkAddressBook').items.items[0].moduleTree.addListener('beforenodedrop', function(e) {\n\tif(Ext.isArray(e.data.selections)) {\n\t\tvar r;\n        for(var i = 0; i < e.data.selections.length; i++) {\n            r = e.data.selections[i];\n            var targetParams = e.target.attributes.params;\n            if (targetParams && targetParams.gpByTagS && targetParams.gpByTagS != '') {\n            \tAddressBookAppDirect.tagAddressBook(parseInt(r.get('ID')), targetParams.gpByTagS, 't_mk_app_namecard', function(result, event) {\n            \t\tif (result && result.success) {\n\t\t\t\t\t\te.target.parentNode.reload();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tExt.Msg.alert('信息提示', r.get('F_NAME') + '已打过' + targetParams.gpByTagS + '标签！');\n\t\t\t\t\t}\n\t\t\t\t});\n            } else \n                return false;\n        }\n        return true;\n    }\n});"
				},
				"f_class":"view",
				"f_i_parent":
				{
					"classpath":"query",
					"data":"mkAddressBook.qMyNameCard"
				}
			}
		]
	},
	"f_groups":
	{
		"classpath":"group",
		"data":
		[
			{
				"f_type":0,
				"f_items":
				{
					"classpath":"group",
					"data":
					[
						{
							"f_type":1,
							"f_items":
							{
								"classpath":"group",
								"data":
								[
									{
										"f_type":99,
										"f_icon":"icon-app-mkoa-favoritetag",
										"f_name":"gpByTagS",
										"f_caption":"按标签（动态）",
										"f_key":"gpByTagS",
										"f_config":
										{
											"customtype":"113"
										},
										"f_class":"group",
										"f_i_parent":
										{
											"classpath":"group",
											"data":"mkAddressBook.qMyNameCard.gRootS.gByTagS"
										}
									}
								]
							},
							"f_name":"gByTagS",
							"f_caption":"按标签",
							"f_key":"gByTagS",
							"f_class":"group",
							"f_i_parent":
							{
								"classpath":"group",
								"data":"mkAddressBook.qMyNameCard.gRootS"
							}
						},
						{
							"f_type":1,
							"f_items":
							{
								"classpath":"group",
								"data":
								[
									{
										"f_type":2,
										"f_field":"F_UNIT_NAME",
										"f_valuefield":"",
										"f_name":"gpByUnit",
										"f_caption":"按单位（动态）",
										"f_key":"gpByUnit",
										"f_class":"group",
										"f_i_parent":
										{
											"classpath":"group",
											"data":"mkAddressBook.qMyNameCard.gRootS.gByUnit"
										}
									}
								]
							},
							"f_name":"gByUnit",
							"f_caption":"按单位",
							"f_key":"gByUnit",
							"f_class":"group",
							"f_i_parent":
							{
								"classpath":"group",
								"data":"mkAddressBook.qMyNameCard.gRootS"
							}
						}
					]
				},
				"f_name":"gRootS",
				"f_caption":"根(我的名片夹)",
				"f_key":"gRootS",
				"f_class":"group",
				"f_i_parent":
				{
					"classpath":"query",
					"data":"mkAddressBook.qMyNameCard"
				}
			}
		]
	},
	"f_name":"qMyNameCard",
	"f_caption":"我的名片夹",
	"f_key":"qMyNameCard",
	"f_class":"query",
	"f_i_parent":
	{
		"classpath":"module",
		"data":"mkAddressBook"
	}
}